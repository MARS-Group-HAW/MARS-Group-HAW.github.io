"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[3341],{3905:(e,t,a)=>{a.d(t,{Zo:()=>d,kt:()=>h});var n=a(67294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function l(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var s=n.createContext({}),p=function(e){var t=n.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):o(o({},t),e)),a},d=function(e){var t=p(e.components);return n.createElement(s.Provider,{value:t},e.children)},c="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},m=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,i=e.originalType,s=e.parentName,d=l(e,["components","mdxType","originalType","parentName"]),c=p(a),m=r,h=c["".concat(s,".").concat(m)]||c[m]||u[m]||i;return a?n.createElement(h,o(o({ref:t},d),{},{components:a})):n.createElement(h,o({ref:t},d))}));function h(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=a.length,o=new Array(i);o[0]=m;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[c]="string"==typeof e?e:r,o[1]=l;for(var p=2;p<i;p++)o[p]=a[p];return n.createElement.apply(null,o)}return n.createElement.apply(null,a)}m.displayName="MDXCreateElement"},11056:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>s,contentTitle:()=>o,default:()=>c,frontMatter:()=>i,metadata:()=>l,toc:()=>p});var n=a(87462),r=(a(67294),a(3905));const i={},o="Vector Layer",l={unversionedId:"tutorial/soh/layers/vector_layer",id:"tutorial/soh/layers/vector_layer",title:"Vector Layer",description:"The SmartOpenHamburg model implements a number of vector-layers (more about vector-layers and how to define them can be found here).",source:"@site/docs/tutorial/soh/layers/vector_layer.md",sourceDirName:"tutorial/soh/layers",slug:"/tutorial/soh/layers/vector_layer",permalink:"/docs/tutorial/soh/layers/vector_layer",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/tutorial/soh/layers/vector_layer.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Scheduler Layer",permalink:"/docs/tutorial/soh/layers/scheduling_layer"},next:{title:"Ready to use scenarios",permalink:"/docs/tutorial/soh/scenarios/"}},s={},p=[{value:"Point of Interests",id:"point-of-interests",level:2},{value:"Public Transport Stations",id:"public-transport-stations",level:2},{value:"Landuse Layer",id:"landuse-layer",level:2},{value:"Buildings Footprint",id:"buildings-footprint",level:2},{value:"Modality Networks",id:"modality-networks",level:2},{value:"CarParkingLayer",id:"carparkinglayer",level:2},{value:"CarParkingSpace",id:"carparkingspace",level:3},{value:"Interaction with Parking Spaces at the Beginning and End of a Trip",id:"interaction-with-parking-spaces-at-the-beginning-and-end-of-a-trip",level:3}],d={toc:p};function c(e){let{components:t,...i}=e;return(0,r.kt)("wrapper",(0,n.Z)({},d,i,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"vector-layer"},"Vector Layer"),(0,r.kt)("p",null,"The SmartOpenHamburg model implements a number of vector-layers (more about vector-layers and how to define them can be found ",(0,r.kt)("a",{parentName:"p",href:"/docs/tutorial/development/layers"},"here"),")."),(0,r.kt)("p",null,"Vector layers are used in the model to map environmental information of the city. This environmental information includes the following types:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Point Layer",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Point of interests"),(0,r.kt)("li",{parentName:"ul"},"Public transport stations"))),(0,r.kt)("li",{parentName:"ul"},"Polygon Layer",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Landuse Layer data"),(0,r.kt)("li",{parentName:"ul"},"Buildings footprints"))),(0,r.kt)("li",{parentName:"ul"},"Line Layer",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Walk network "),(0,r.kt)("li",{parentName:"ul"},"Drive network"),(0,r.kt)("li",{parentName:"ul"},"Bicycle network")))),(0,r.kt)("h2",{id:"point-of-interests"},"Point of Interests"),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"VectorPoiLayer")," (POI) is a point layer that includes service points. It supports the ",(0,r.kt)("a",{parentName:"p",href:"/docs/tutorial/soh/agents/#daily-schedule-model"},"Daily Schedule Model")," of the Citizen Agents. "),(0,r.kt)("mermaid",{value:"classDiagram\n    class VectorPoiLayer {\n    }\n    VectorLayer <|-- VectorPoiLayer"}),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"VectorPoiLayer")," is used to fulfill the ",(0,r.kt)("inlineCode",{parentName:"p"},"Freetime")," category."),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"LandUse",src:a(13427).Z,width:"919",height:"809"})),(0,r.kt)("h2",{id:"public-transport-stations"},"Public Transport Stations"),(0,r.kt)("p",null,"The public transport layer is a point layer that includes public train stations, bus stops and landing stages, decoupled from the ",(0,r.kt)("inlineCode",{parentName:"p"},"POI")," layer. It can be used to identify multimodal routes for public transport."),(0,r.kt)("mermaid",{value:"classDiagram\n    class VectorPublicStations {\n    }\n    VectorLayer <|-- VectorPublicStations"}),(0,r.kt)("h2",{id:"landuse-layer"},"Landuse Layer"),(0,r.kt)("mermaid",{value:"classDiagram\n    class VectorLanduseLayer {\n    }\n    VectorLayer <|-- VectorLanduseLayer"}),(0,r.kt)("p",null,"Der Landuse Layer wird verwendet um Service Gebiete in der Stadt zu identifizieren, anhand dere der Tageplan des ",(0,r.kt)("inlineCode",{parentName:"p"},"Citizen")," Agenten ausgelegt werden kann. Er enth\xe4lt weitere nicht nach Service Punkten benannnte Orte wie Gr\xfcnfl\xe4chen oder Inndustrie Bezirke. Desweiteren wird er verwendet um Wohnsitutation in der Stadt abzubilden um daraus die ",(0,r.kt)("inlineCode",{parentName:"p"},"Home")," Lokalit\xe4t im Tagesplan zu ermitteln."),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"LandUse",src:a(59573).Z,width:"827",height:"724"})),(0,r.kt)("p",null,"Die obige Abbildung zeigt den Landuse Layer mit hervorgehobenen ",(0,r.kt)("inlineCode",{parentName:"p"},"residential")," (blau) Bezirken und allen anderen Bezirken (orange). "),(0,r.kt)("p",null,"K-NN Anfrange k\xf6nen an den ",(0,r.kt)("inlineCode",{parentName:"p"},"VectorLanduseLayer")," gestellt werden um nach naheliegenden Gr\xfcnfl\xe4chen zu suchen:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-csharp"},'var nearestLands = VectorLanduseLayer.Explore(new []{9.941650, 53.587268}, 100, 1, land => land.Type == "grass");\n')),(0,r.kt)("h2",{id:"buildings-footprint"},"Buildings Footprint"),(0,r.kt)("p",null,"The Buildings Footprint is multi-polygon based layer and represents the positioned buildings of the city to support the categories for using the ",(0,r.kt)("a",{parentName:"p",href:"/docs/tutorial/soh/agents/"},"Daily Schedule Model")),(0,r.kt)("mermaid",{value:"classDiagram\n    class VectorBuildingsLayer {\n    }\n    VectorLayer <|-- VectorBuildingsLayer"}),(0,r.kt)("p",null,"A ",(0,r.kt)("inlineCode",{parentName:"p"},"VectorBuildingsLayer")," can be used similar to the ",(0,r.kt)("inlineCode",{parentName:"p"},"VectorLanduseLayer")," to search for nearby service locations. The following figure shows the integrated buildings' footprint of Hamburg, highlighting the universities (red):"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"LandUse",src:a(58985).Z,width:"949",height:"848"})),(0,r.kt)("p",null,"The following code searches for a supermarket to fulfill ",(0,r.kt)("inlineCode",{parentName:"p"},"Errands"),":"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-csharp"},'var nearestShops = VectorLanduseLayer.Explore(new []{9.941650, 53.587268}, 100, 1, buildings => land.Type == "supermarket");\n')),(0,r.kt)("h2",{id:"modality-networks"},"Modality Networks"),(0,r.kt)("p",null,"To map the areas in which agents can move and to differentiate within the modality route planning, a separate network is provided for each available modality.\nNetworks are integrated at runtime and implemented in the model by the ",(0,r.kt)("inlineCode",{parentName:"p"},"SpatialGraphEnvironment"),"."),(0,r.kt)("p",null,"We differentiate between several nets, since certain routes are only passable for a subset of modalities to a limited extent. The following picture shows the integrated network for vehicle and walk modality:"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"IntegratedGraph",src:a(48953).Z,width:"848",height:"824"})),(0,r.kt)("p",null,"The walk network is managed by the ",(0,r.kt)("inlineCode",{parentName:"p"},"CitizenLayer")," for the walk modality, the ",(0,r.kt)("inlineCode",{parentName:"p"},"CarLayer")," for the drive modality and the ",(0,r.kt)("inlineCode",{parentName:"p"},"BicycleLayer")," for the bicycle modality. The networks contain the moving agents can be queried against other agents, obstacles or to resolve multi-modality routes.  "),(0,r.kt)("h2",{id:"carparkinglayer"},"CarParkingLayer"),(0,r.kt)("p",null,"A ",(0,r.kt)("inlineCode",{parentName:"p"},"CarParkingLayer")," is a ",(0,r.kt)("inlineCode",{parentName:"p"},"VectorLayer")," that holds ",(0,r.kt)("inlineCode",{parentName:"p"},"CarParkingSpaces"),"."),(0,r.kt)("mermaid",{value:"classDiagram\n    class CarParkingLayer {\n    }\n\n    class CarParkingSpace {\n\n    }\n\n    VectorLayer <|-- CarParkingLayer\n    IVectorFeature <|-- CarParkingSpace\n"}),(0,r.kt)("p",null,"It can be filled with data that hold the geocoordinates of parking areas and parking spaces. Each feature of the imported vector layer maps to one ",(0,r.kt)("inlineCode",{parentName:"p"},"CarParkingSpace")," in the ",(0,r.kt)("inlineCode",{parentName:"p"},"CarParkingLayer"),". Below is a screenshot of a vector layer in QGIS that shows the geocoordinates of parking areas and parking spaces in the inner city of Hamburg, Germany."),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Alt-Text",src:a(90591).Z,width:"800",height:"419"})),(0,r.kt)("p",null,"A ",(0,r.kt)("inlineCode",{parentName:"p"},"CarParkingLayer")," offers methods for managing and interacting with ",(0,r.kt)("inlineCode",{parentName:"p"},"CarParkingSpace")," objects. Below are some examples:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"Nearest(position, freeCapacity=true)"),": returns the ",(0,r.kt)("inlineCode",{parentName:"li"},"CarParkingSpace")," with shortest distance to ",(0,r.kt)("inlineCode",{parentName:"li"},"position"),". The parameter ",(0,r.kt)("inlineCode",{parentName:"li"},"freeCapacity")," is optional and denotes if the requested ",(0,r.kt)("inlineCode",{parentName:"li"},"CarParkingSpace")," should be free at the time of calling (if it is set to ",(0,r.kt)("inlineCode",{parentName:"li"},"false"),", the method will return the ",(0,r.kt)("inlineCode",{parentName:"li"},"CarParkingSpace")," that is closest to ",(0,r.kt)("inlineCode",{parentName:"li"},"position"),", regardless of its occupation status at the time of calling)."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"Explore(position=null, maxDistance=-1, freeCapacity=true)"),": returns a list of ",(0,r.kt)("inlineCode",{parentName:"li"},"CarParkingSpaces")," with shortest distance (in ascending order) to ",(0,r.kt)("inlineCode",{parentName:"li"},"position"),". If ",(0,r.kt)("inlineCode",{parentName:"li"},"position")," is not specified, the method uses the geocoordinates of the calling agent. ",(0,r.kt)("inlineCode",{parentName:"li"},"maxDistance")," is optional and denotes the radius in which the exploration should occur. ",(0,r.kt)("inlineCode",{parentName:"li"},"freeCapacity")," is also optional and denotes whether the returned ",(0,r.kt)("inlineCode",{parentName:"li"},"CarParkingSpace")," objects should be free at the time of calling (if it is set to ",(0,r.kt)("inlineCode",{parentName:"li"},"false"),", the method will return all ",(0,r.kt)("inlineCode",{parentName:"li"},"CarParkingSpace")," objects within the exploration radius, regardless of their occupation status at the time of calling).")),(0,r.kt)("h3",{id:"carparkingspace"},"CarParkingSpace"),(0,r.kt)("p",null,"Each feature of the imported vector layer maps to one ",(0,r.kt)("inlineCode",{parentName:"p"},"CarParkingSpace")," in the ",(0,r.kt)("inlineCode",{parentName:"p"},"CarParkingLayer"),". A feature of a vector layer contains an attribute ",(0,r.kt)("em",{parentName:"p"},"area")," (in m\xb2) which is used by the ",(0,r.kt)("inlineCode",{parentName:"p"},"CarParkingLayer")," to compute the ",(0,r.kt)("inlineCode",{parentName:"p"},"Capacity")," of each ",(0,r.kt)("inlineCode",{parentName:"p"},"CarParkingSpace"),". ",(0,r.kt)("inlineCode",{parentName:"p"},"Capacity")," has three categories:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"If ",(0,r.kt)("inlineCode",{parentName:"li"},"Capacity < 10"),", then the ",(0,r.kt)("inlineCode",{parentName:"li"},"CarParkingSpace")," has space for a single ",(0,r.kt)("inlineCode",{parentName:"li"},"Car")),(0,r.kt)("li",{parentName:"ul"},"If ",(0,r.kt)("inlineCode",{parentName:"li"},"10 <= Capacity < 500 "),", then the parking area of the ",(0,r.kt)("inlineCode",{parentName:"li"},"CarParkingSpace")," is divided into parking spaces of 15 m\xb2 each"),(0,r.kt)("li",{parentName:"ul"},"If ",(0,r.kt)("inlineCode",{parentName:"li"},"Capacity >= 500"),", then the parking area of the ",(0,r.kt)("inlineCode",{parentName:"li"},"CarParkingSpace")," is divided into parking spaces of 20 m\xb2 each ")),(0,r.kt)("p",null,"A ",(0,r.kt)("inlineCode",{parentName:"p"},"CarParkingSpace")," object can be interacted with via several methods. Below are some examples: "),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"HasCapacity"),": returns whether the ",(0,r.kt)("inlineCode",{parentName:"li"},"CarParkingSpace")," currently has free parking spaces"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"Enter(Car)")," and ",(0,r.kt)("inlineCode",{parentName:"li"},"Leave(Car)"),": can be used by the calling agent to enter or leave (respectively) the ",(0,r.kt)("inlineCode",{parentName:"li"},"CarParkingSpace")," with his/her ",(0,r.kt)("inlineCode",{parentName:"li"},"Car"))),(0,r.kt)("h3",{id:"interaction-with-parking-spaces-at-the-beginning-and-end-of-a-trip"},"Interaction with Parking Spaces at the Beginning and End of a Trip"),(0,r.kt)("p",null,"A trip of an agent who travels from point ",(0,r.kt)("inlineCode",{parentName:"p"},"A")," to point ",(0,r.kt)("inlineCode",{parentName:"p"},"B")," using a ",(0,r.kt)("inlineCode",{parentName:"p"},"Car")," can be divided into three sections (broadly speaking):"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Travel on foot from ",(0,r.kt)("inlineCode",{parentName:"li"},"A")," to the position of the ",(0,r.kt)("inlineCode",{parentName:"li"},"CarParkingSpace")," that holds the ",(0,r.kt)("inlineCode",{parentName:"li"},"Car")),(0,r.kt)("li",{parentName:"ol"},"Travel from the position of the ",(0,r.kt)("inlineCode",{parentName:"li"},"CarParkingSpace")," to the ",(0,r.kt)("inlineCode",{parentName:"li"},"CarParkingspace")," with shortest distance to ",(0,r.kt)("inlineCode",{parentName:"li"},"B")," for which ",(0,r.kt)("inlineCode",{parentName:"li"},"HasCapacity == true")),(0,r.kt)("li",{parentName:"ol"},"If the ",(0,r.kt)("inlineCode",{parentName:"li"},"CarParkingSpace")," is still free upon the agent's arrival, it is occupied and the agent moves on foot from its position to ",(0,r.kt)("inlineCode",{parentName:"li"},"B"),". If the ",(0,r.kt)("inlineCode",{parentName:"li"},"CarParkingSpace")," has is occupied upon arrival, the agent will search for the ",(0,r.kt)("inlineCode",{parentName:"li"},"CarParkingSpace")," with shortest distance to his/her current position.")))}c.isMDXComponent=!0},58985:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/buildings-76ae78b244faa82b8301507a56800fcb.png"},59573:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/landuse_residential_other-074f9e20263162065e316d3076c61ffd.png"},90591:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/parkingSpaces-34c4f27af5cd4bed55c1bce66a81e7dc.PNG"},13427:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/poi-91f816d6d757891aaafe11f66dac2259.png"},48953:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/walk_drive_graph-801821fd5fc0203418d889e88df06e1f.png"}}]);